# ğŸš€ è‡ªåŠ¨åŒ–éƒ¨ç½²æŒ‡å—

è¿™ä¸ªé¡¹ç›®åŒ…å«äº†å®Œæ•´çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ç³»ç»Ÿï¼Œè®©æ‚¨å¯ä»¥è½»æ¾åœ°å°† AI å›¾åƒç”Ÿæˆåº”ç”¨éƒ¨ç½²åˆ° Cloudflare Workersã€‚

## ğŸ“‹ éƒ¨ç½²æ–¹å¼æ€»è§ˆ

### 1. ğŸ¯ ä¸€é”®åˆå§‹åŒ–ï¼ˆæ¨èæ–°ç”¨æˆ·ï¼‰

```bash
npm run init
# æˆ–è€…
./init.sh
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- âœ… æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒå’Œä¾èµ–
- ğŸ“¦ è‡ªåŠ¨å®‰è£…å¿…è¦çš„ä¾èµ–
- ğŸ” å¼•å¯¼æ‚¨ç™»å½• Cloudflare
- ğŸ—„ï¸ è‡ªåŠ¨åˆ›å»ºå’Œé…ç½® KV å‘½åç©ºé—´
- ğŸ” è¿è¡Œä»£ç è´¨é‡æ£€æŸ¥
- ğŸš€ æä¾›éƒ¨ç½²é€‰é¡¹

### 2. âš¡ å¿«é€Ÿéƒ¨ç½²ï¼ˆé€‚åˆæœ‰ç»éªŒç”¨æˆ·ï¼‰

```bash
npm run deploy:quick
# æˆ–è€…
./quick-deploy.sh
```

æœ€å°åŒ–çš„éƒ¨ç½²æµç¨‹ï¼Œè·³è¿‡è¯¦ç»†æ£€æŸ¥ï¼Œç›´æ¥éƒ¨ç½²ã€‚

### 3. ğŸ”§ æ ‡å‡†éƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

```bash
npm run deploy
# æˆ–è€…
./deploy.sh
```

å®Œæ•´çš„éƒ¨ç½²æµç¨‹ï¼ŒåŒ…å«æ‰€æœ‰æ£€æŸ¥å’ŒéªŒè¯æ­¥éª¤ã€‚

### 4. ğŸ¯ ç¯å¢ƒç‰¹å®šéƒ¨ç½²

```bash
# å¼€å‘ç¯å¢ƒ
npm run deploy:dev

# é¢„å‘å¸ƒç¯å¢ƒ
npm run deploy:staging  

# ç”Ÿäº§ç¯å¢ƒ
npm run deploy:production
```

## ğŸ› ï¸ é…ç½®ç®¡ç†

### è‡ªåŠ¨åŒ– KV è®¾ç½®

```bash
npm run setup:kv
```

è‡ªåŠ¨åˆ›å»ºå’Œé…ç½® Cloudflare KV å‘½åç©ºé—´ï¼š
- ğŸ­ ç”Ÿäº§ç¯å¢ƒå‘½åç©ºé—´
- ğŸ‘€ é¢„è§ˆç¯å¢ƒå‘½åç©ºé—´
- ğŸ“ è‡ªåŠ¨æ›´æ–° `wrangler.toml` é…ç½®

### ç¯å¢ƒæ£€æŸ¥

```bash
npm run environment-check
```

å…¨é¢æ£€æŸ¥éƒ¨ç½²ç¯å¢ƒï¼š
- âœ… Node.js å’Œ npm ç‰ˆæœ¬
- ğŸ”§ Wrangler CLI å®‰è£…å’Œç™»å½•çŠ¶æ€
- ğŸ“ å¿…éœ€æ–‡ä»¶å­˜åœ¨æ€§
- âš™ï¸ é…ç½®æ–‡ä»¶å®Œæ•´æ€§
- ğŸ“¦ ä¾èµ–å®‰è£…çŠ¶æ€
- ğŸ¨ ä»£ç è´¨é‡å·¥å…·

### é…ç½®éªŒè¯

```bash
npm run verify-config
```

éªŒè¯é¡¹ç›®é…ç½®æ˜¯å¦æ­£ç¡®ï¼š
- ğŸ“‹ `package.json` è„šæœ¬é…ç½®
- âš™ï¸ `wrangler.toml` å¿…è¦è®¾ç½®
- ğŸ—„ï¸ KV å‘½åç©ºé—´é…ç½®çŠ¶æ€

## ğŸ—„ï¸ KV å­˜å‚¨ç®¡ç†

### æŸ¥çœ‹å­˜å‚¨ç»Ÿè®¡

```bash
npm run kv:stats
```

æ˜¾ç¤ºï¼š
- ğŸ“Š æ€»é”®æ•°å’Œåˆ†ç±»ç»Ÿè®¡
- ğŸ’¾ å­˜å‚¨ä½¿ç”¨é‡ä¼°ç®—
- ğŸ•’ æœ€è¿‘çš„ç”Ÿæˆè®°å½•

### æ¸…ç†è¿‡æœŸæ•°æ®

```bash
npm run kv:cleanup       # æ¸…ç† 7 å¤©å‰çš„æ•°æ®
npm run kv:cleanup 30    # æ¸…ç† 30 å¤©å‰çš„æ•°æ®
```

### å®Œå…¨æ¸…ç©ºå­˜å‚¨ï¼ˆå±é™©æ“ä½œï¼‰

```bash
npm run kv:clear
```

âš ï¸ **è­¦å‘Š**: è¿™ä¼šåˆ é™¤æ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼Œæ“ä½œä¸å¯æ¢å¤ï¼

## ğŸ” éƒ¨ç½²åéªŒè¯

### è‡ªåŠ¨éªŒè¯

```bash
npm run health-check
```

è‡ªåŠ¨è¿è¡Œï¼š
- ğŸ¥ åŸºç¡€å¥åº·æ£€æŸ¥
- ğŸ”Œ API ç«¯ç‚¹æµ‹è¯•
- âš¡ æ€§èƒ½æµ‹è¯•
- ğŸ¤– AI åŠŸèƒ½æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

### æŸ¥çœ‹æ—¥å¿—

```bash
npm run logs              # ç”Ÿäº§ç¯å¢ƒæ—¥å¿—
npm run logs:staging      # é¢„å‘å¸ƒç¯å¢ƒæ—¥å¿—
```

## ğŸ“Š è„šæœ¬å‚æ•°è¯´æ˜

### éƒ¨ç½²è„šæœ¬å‚æ•°

```bash
./deploy.sh [é€‰é¡¹]

é€‰é¡¹:
  -e, --env ENV        ç›®æ ‡ç¯å¢ƒ (development|staging|production)
  --skip-checks        è·³è¿‡ä»£ç è´¨é‡æ£€æŸ¥
  --force-setup        å¼ºåˆ¶é‡æ–°è®¾ç½® KV å‘½åç©ºé—´
  -h, --help           æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### KV æ¸…ç†è„šæœ¬å‚æ•°

```bash
node scripts/cleanup-kv.js [å‘½ä»¤] [å‚æ•°]

å‘½ä»¤:
  stats              æ˜¾ç¤ºå­˜å‚¨ç»Ÿè®¡ä¿¡æ¯ (é»˜è®¤)
  cleanup [å¤©æ•°]     æ¸…ç†æŒ‡å®šå¤©æ•°å‰çš„å†å²è®°å½• (é»˜è®¤: 7å¤©)
  clear              æ¸…ç†æ‰€æœ‰æ•°æ® (å±é™©æ“ä½œ)
  help               æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Wrangler æœªå®‰è£…**
   ```bash
   npm install -g wrangler
   ```

2. **æœªç™»å½• Cloudflare**
   ```bash
   wrangler auth login
   ```

3. **KV å‘½åç©ºé—´é…ç½®é”™è¯¯**
   ```bash
   npm run setup:kv
   ```

4. **ä¾èµ–å®‰è£…é—®é¢˜**
   ```bash
   npm run fresh-install
   ```

5. **ä»£ç é£æ ¼é—®é¢˜**
   ```bash
   npm run lint:fix
   ```

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡ºï¼š
```bash
DEBUG=true ./deploy.sh
```

### æ¸…ç†å’Œé‡ç½®

```bash
npm run clean         # æ¸…ç†æ„å»ºç¼“å­˜
npm run fresh-install # é‡æ–°å®‰è£…ä¾èµ–
```

## ğŸ“ˆ éƒ¨ç½²æµç¨‹å›¾

```
ğŸ“‹ ç¯å¢ƒæ£€æŸ¥
    â†“
ğŸ” Cloudflare è®¤è¯
    â†“
ğŸ“¦ å®‰è£…ä¾èµ–
    â†“
ğŸ—„ï¸ KV å‘½åç©ºé—´è®¾ç½®
    â†“
ğŸ” ä»£ç è´¨é‡æ£€æŸ¥
    â†“
ğŸš€ éƒ¨ç½²åˆ° Workers
    â†“
âœ… éƒ¨ç½²åéªŒè¯
    â†“
ğŸ‰ å®Œæˆ
```

## ğŸ¯ æœ€ä½³å®è·µ

1. **é¦–æ¬¡éƒ¨ç½²**: ä½¿ç”¨ `npm run init` è¿›è¡Œå®Œæ•´åˆå§‹åŒ–
2. **æ—¥å¸¸å¼€å‘**: ä½¿ç”¨ `npm run dev` æœ¬åœ°å¼€å‘
3. **å¿«é€Ÿä¿®å¤**: ä½¿ç”¨ `npm run deploy:quick` å¿«é€Ÿéƒ¨ç½²
4. **ç”Ÿäº§å‘å¸ƒ**: ä½¿ç”¨ `npm run deploy:production` æ­£å¼éƒ¨ç½²
5. **å®šæœŸç»´æŠ¤**: ä½¿ç”¨ `npm run kv:cleanup` æ¸…ç†è¿‡æœŸæ•°æ®

## ğŸ“ è·å–å¸®åŠ©

- ğŸ“– æŸ¥çœ‹é¡¹ç›® README.md
- ğŸ› ï¸ è¿è¡Œ `npm run environment-check` è¯Šæ–­é—®é¢˜
- ğŸ“‹ æ£€æŸ¥ `docs/development.md` å¼€å‘æŒ‡å—
- ğŸ”— è®¿é—® [Cloudflare Workers æ–‡æ¡£](https://developers.cloudflare.com/workers/)

---

ğŸ’¡ **æç¤º**: æ‰€æœ‰è„šæœ¬éƒ½åŒ…å«è¯¦ç»†çš„é”™è¯¯æç¤ºå’Œä¿®å¤å»ºè®®ï¼Œé‡åˆ°é—®é¢˜æ—¶è¯·ä»”ç»†é˜…è¯»è¾“å‡ºä¿¡æ¯ã€‚
